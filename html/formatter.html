

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Custom formatter &mdash; friendly-traceback 0.4.28 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Other details for advanced users" href="usage_adv.html" />
    <link rel="prev" title="Public API" href="api.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> friendly-traceback
          

          
          </a>

          
            
            
              <div class="version">
                0.4.28
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Begin here</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="beginner.html">Useful information for beginners</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Basic usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="when_ft.html">Differences between friendly and friendly_traceback</a></li>
</ul>
<p class="caption"><span class="caption-text">friendly console</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="repl.html">Console basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="why.html">why()</a></li>
<li class="toctree-l1"><a class="reference internal" href="what.html">what()</a></li>
<li class="toctree-l1"><a class="reference internal" href="where.html">where()</a></li>
<li class="toctree-l1"><a class="reference internal" href="explain.html">explain()</a></li>
<li class="toctree-l1"><a class="reference internal" href="www.html">www()</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">history() and back()</a></li>
<li class="toctree-l1"><a class="reference internal" href="friendly_object.html">Friendly object</a></li>
<li class="toctree-l1"><a class="reference internal" href="repl_api.html">Everything about the friendly console</a></li>
<li class="toctree-l1"><a class="reference internal" href="about_warnings.html">One last thing</a></li>
</ul>
<p class="caption"><span class="caption-text">Why import *?</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="import_all.html">Why <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">*</span></code>?</a></li>
</ul>
<p class="caption"><span class="caption-text">IDLE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="idle.html">About IDLE</a></li>
<li class="toctree-l1"><a class="reference internal" href="idle_repl.html">IDLE’s shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="idle_run.html">IDLE: using the editor</a></li>
</ul>
<p class="caption"><span class="caption-text">Mu</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="mu_about.html">About Mu</a></li>
<li class="toctree-l1"><a class="reference internal" href="mu_install.html">Using with Mu: installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="mu_repl.html">Mu’s REPL</a></li>
<li class="toctree-l1"><a class="reference internal" href="mu_run.html">Mu: executing a program</a></li>
</ul>
<p class="caption"><span class="caption-text">Other consoles</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pyrepl.html">Using another REPL</a></li>
<li class="toctree-l1"><a class="reference internal" href="vs_code_repl.html">Visual Studio Code’s terminal</a></li>
<li class="toctree-l1"><a class="reference internal" href="ipython_repl.html">IPython’s console</a></li>
<li class="toctree-l1"><a class="reference internal" href="other_repl.html">Other repl</a></li>
</ul>
<p class="caption"><span class="caption-text">Editors and Notebooks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install_thonny.html">Information for Thonny</a></li>
<li class="toctree-l1"><a class="reference internal" href="editor.html">Using with an editor or IDE</a></li>
<li class="toctree-l1"><a class="reference internal" href="jupyter.html">Jupyter notebooks and JupyterLab</a></li>
<li class="toctree-l1"><a class="reference internal" href="vs_code.html">Visual Studio Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="colab.html">Google’s colab</a></li>
</ul>
<p class="caption"><span class="caption-text">Thoughts on design</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="design.html">Some thoughts on the design of friendly</a></li>
<li class="toctree-l1"><a class="reference internal" href="themes.html">Themes, Styles, and Colours</a></li>
<li class="toctree-l1"><a class="reference internal" href="multiple_tracebacks.html">Multiple tracebacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="friendly_tb.html">friendly tracebacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="ipython_tb.html">IPython tracebacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="jupyter_tb.html">IPython tracebacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="numbered_prompt.html">Numbered prompt</a></li>
<li class="toctree-l1"><a class="reference internal" href="idle_colours.html">IDLE’s colours</a></li>
</ul>
<p class="caption"><span class="caption-text">Use in your project</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="api.html">Public API</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Custom formatter</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#base-formatters-py">base_formatters.py</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="usage_adv.html">Other details for advanced users</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">Editor plugins</a></li>
</ul>
<p class="caption"><span class="caption-text">Contribute</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="suggest.html">Suggest an addition</a></li>
<li class="toctree-l1"><a class="reference internal" href="translation_notes.html">Notes on translations - using gettext</a></li>
</ul>
<p class="caption"><span class="caption-text">All the tracebacks!</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="known.html">Generic information about various exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="tracebacks_en_3.6.html">friendly tracebacks - Python 3.6 in English</a></li>
<li class="toctree-l1"><a class="reference internal" href="syntax_tracebacks_en_3.6.html">SyntaxError - Python 3.6 in English</a></li>
<li class="toctree-l1"><a class="reference internal" href="tracebacks_en_3.7.html">friendly tracebacks - Python 3.7 in English</a></li>
<li class="toctree-l1"><a class="reference internal" href="syntax_tracebacks_en_3.7.html">SyntaxError - Python 3.7 in English</a></li>
<li class="toctree-l1"><a class="reference internal" href="tracebacks_en_3.8.html">friendly tracebacks - Python 3.8 in English</a></li>
<li class="toctree-l1"><a class="reference internal" href="syntax_tracebacks_en_3.8.html">SyntaxError - Python 3.8 in English</a></li>
<li class="toctree-l1"><a class="reference internal" href="tracebacks_en_3.9.html">friendly tracebacks - Python 3.9 in English</a></li>
<li class="toctree-l1"><a class="reference internal" href="syntax_tracebacks_en_3.9.html">SyntaxError - Python 3.9 in English</a></li>
<li class="toctree-l1"><a class="reference internal" href="tracebacks_en_3.10.html">friendly tracebacks - Python 3.10 in English</a></li>
<li class="toctree-l1"><a class="reference internal" href="syntax_tracebacks_en_3.10.html">SyntaxError - Python 3.10 in English</a></li>
<li class="toctree-l1"><a class="reference internal" href="compare_exceptions.html">Comparing Exception messages between Python versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="compare.html">Comparison between Python versions: SyntaxErrors</a></li>
</ul>
<p class="caption"><span class="caption-text">En français</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tracebacks_fr.html"> Friendly tracebacks - en Français</a></li>
<li class="toctree-l1"><a class="reference internal" href="syntax_tracebacks_fr.html"> Friendly SyntaxError tracebacks - en Français</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">friendly-traceback</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Custom formatter</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/formatter.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="usage_adv.html" class="btn btn-neutral float-right" title="Other details for advanced users" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
      
      
        <a href="api.html" class="btn btn-neutral float-left" title="Public API" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="custom-formatter">
<h1>Custom formatter<a class="headerlink" href="#custom-formatter" title="Permalink to this headline">¶</a></h1>
<p>friendly comes with various formatters which style
the information differently based on the environment.
If the builtin formatters do not meet your need, you can design
your own and set it as a default using either:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">friendly</span>
<span class="kn">from</span> <span class="nn">my_module</span> <span class="kn">import</span> <span class="n">my_formatter</span>

<span class="n">friendly</span><span class="o">.</span><span class="n">set_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="o">=</span><span class="n">my_formatter</span><span class="p">)</span>
</pre></div>
</div>
<p>or, from the command line:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python -m friendly --format path.to.my_module.my_formatter
</pre></div>
</div>
<p>Currently, a formatter must accept two arguments:</p>
<ol class="arabic">
<li><p>A dict (<code class="docutils literal notranslate"><span class="pre">info</span></code>) which contains the friendly traceback information.
At the time this documenation was written, the dict items were the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">items</span> <span class="o">=</span> <span class="p">[</span>
     <span class="s2">&quot;header&quot;</span><span class="p">,</span>
     <span class="s2">&quot;message&quot;</span><span class="p">,</span>
     <span class="s2">&quot;original_python_traceback&quot;</span><span class="p">,</span>
     <span class="s2">&quot;simulated_python_traceback&quot;</span><span class="p">,</span>
     <span class="s2">&quot;shortened_traceback&quot;</span><span class="p">,</span>
     <span class="s2">&quot;suggest&quot;</span><span class="p">,</span>
     <span class="s2">&quot;generic&quot;</span><span class="p">,</span>
     <span class="s2">&quot;parsing_error&quot;</span><span class="p">,</span>
     <span class="s2">&quot;parsing_error_source&quot;</span><span class="p">,</span>
     <span class="s2">&quot;cause&quot;</span><span class="p">,</span>
     <span class="s2">&quot;last_call_header&quot;</span><span class="p">,</span>
     <span class="s2">&quot;last_call_source&quot;</span><span class="p">,</span>
     <span class="s2">&quot;last_call_variables&quot;</span><span class="p">,</span>
     <span class="s2">&quot;exception_raised_header&quot;</span><span class="p">,</span>
     <span class="s2">&quot;exception_raised_source&quot;</span><span class="p">,</span>
     <span class="s2">&quot;exception_raised_variables&quot;</span><span class="p">,</span>
 <span class="p">]</span>
</pre></div>
</div>
</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">Friendly._show_info()</span></code> in a friendly console to see all possible items.
Note that, when an actual exception is recorded, a few items not meant to
be shown to the end user are stored in <code class="docutils literal notranslate"><span class="pre">info</span></code>; this is done so as
to make them available in the console using method calls like
<code class="docutils literal notranslate"><span class="pre">Friendly._get_exception()</span></code>, <code class="docutils literal notranslate"><span class="pre">Friendly._get_frame()</span></code>, etc.</p>
</div>
<ol class="arabic simple" start="2">
<li><p>A string (<code class="docutils literal notranslate"><span class="pre">include</span></code>) which specifies which parts of the friendly
traceback should be shown, and whose value is currently set
using <code class="docutils literal notranslate"><span class="pre">friendly.set_include(...)</span></code>.</p></li>
</ol>
<p>The second argument _might_ change in the future. If you only plan
on making use of the traceback information compiled by friendly
and determine what to show (and in which order) on your own, to ensure
that future version of friendly will be compatible with
your formatter, we suggest the following definition:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_formatter</span><span class="p">(</span><span class="n">info</span><span class="p">,</span> <span class="o">**</span><span class="n">ignore</span><span class="p">):</span>
    <span class="o">....</span>
</pre></div>
</div>
<span class="target" id="module-friendly_traceback.base_formatters"></span><div class="section" id="base-formatters-py">
<h2>base_formatters.py<a class="headerlink" href="#base-formatters-py" title="Permalink to this headline">¶</a></h2>
<p>Default formatters showing all or only part of the available information.</p>
<p>A formatter is a function that takes two arguments:</p>
<ol class="arabic simple">
<li><p>a dict (named <code class="docutils literal notranslate"><span class="pre">info</span></code> everywhere in friendly files) containing
all the information that can be shown to the user, as well as some
entries that are meant to be used only internally as the full
friendly information is obtained.</p></li>
<li><p>A second argument which is meant to convey what information should be shown.
This second argument used to be a single integer (“verbosity level”).
It is currently recently being replaced by a single string. However,
this might change as we experiment with various options prior to
version 1.0</p></li>
</ol>
<p>A formatter returns a single string. By default, this string will be
written to stderr; however this can be changed by the calling program.</p>
<p>This module currently contains 2 formatters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">repl()</span></code>: This is used to print the information in a traditional console.
The indentation of the traceback itself is chosen
so as to reproduce that of a normal Python traceback.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">docs()</span></code>: this produces output with leading spaces so that it can be
embedded as a code-block in a file (such as .rst). It can also be used
to print the information in a traditional console.</p></li>
</ul>
<dl class="py function">
<dt id="friendly_traceback.base_formatters.docs">
<code class="sig-name descname"><span class="pre">docs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">friendly_traceback.typing.Info</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">message</span><span class="p"><span class="pre">,</span> </span><span class="pre">hint</span><span class="p"><span class="pre">,</span> </span><span class="pre">what</span><span class="p"><span class="pre">,</span> </span><span class="pre">why</span><span class="p"><span class="pre">,</span> </span><span class="pre">where</span><span class="p"><span class="pre">,</span> </span><span class="pre">friendly_tb</span><span class="p"><span class="pre">,</span> </span><span class="pre">python_tb</span><span class="p"><span class="pre">,</span> </span><span class="pre">debug_tb</span><span class="p"><span class="pre">,</span> </span><span class="pre">explain</span><span class="p"><span class="pre">,</span> </span><span class="pre">no_tb</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'friendly_tb'</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">str</span><a class="reference internal" href="_modules/friendly_traceback/base_formatters.html#docs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#friendly_traceback.base_formatters.docs" title="Permalink to this definition">¶</a></dt>
<dd><p>Formatter that produces an output that is suitable for
insertion in a RestructuredText (.rst) code block,
with pre-formatted indentation.</p>
<p>The only change made to the content of “info” is
some added indentation.</p>
</dd></dl>

<dl class="py function">
<dt id="friendly_traceback.base_formatters.no_result">
<code class="sig-name descname"><span class="pre">no_result</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">friendly_traceback.typing.Info</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">message</span><span class="p"><span class="pre">,</span> </span><span class="pre">hint</span><span class="p"><span class="pre">,</span> </span><span class="pre">what</span><span class="p"><span class="pre">,</span> </span><span class="pre">why</span><span class="p"><span class="pre">,</span> </span><span class="pre">where</span><span class="p"><span class="pre">,</span> </span><span class="pre">friendly_tb</span><span class="p"><span class="pre">,</span> </span><span class="pre">python_tb</span><span class="p"><span class="pre">,</span> </span><span class="pre">debug_tb</span><span class="p"><span class="pre">,</span> </span><span class="pre">explain</span><span class="p"><span class="pre">,</span> </span><span class="pre">no_tb</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">str</span><a class="reference internal" href="_modules/friendly_traceback/base_formatters.html#no_result"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#friendly_traceback.base_formatters.no_result" title="Permalink to this definition">¶</a></dt>
<dd><p>Should normally only be called if no result is available
from either hint() or why().</p>
</dd></dl>

<dl class="py function">
<dt id="friendly_traceback.base_formatters.repl">
<code class="sig-name descname"><span class="pre">repl</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">friendly_traceback.typing.Info</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">message</span><span class="p"><span class="pre">,</span> </span><span class="pre">hint</span><span class="p"><span class="pre">,</span> </span><span class="pre">what</span><span class="p"><span class="pre">,</span> </span><span class="pre">why</span><span class="p"><span class="pre">,</span> </span><span class="pre">where</span><span class="p"><span class="pre">,</span> </span><span class="pre">friendly_tb</span><span class="p"><span class="pre">,</span> </span><span class="pre">python_tb</span><span class="p"><span class="pre">,</span> </span><span class="pre">debug_tb</span><span class="p"><span class="pre">,</span> </span><span class="pre">explain</span><span class="p"><span class="pre">,</span> </span><span class="pre">no_tb</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'friendly_tb'</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">str</span><a class="reference internal" href="_modules/friendly_traceback/base_formatters.html#repl"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#friendly_traceback.base_formatters.repl" title="Permalink to this definition">¶</a></dt>
<dd><p>Default formatter, primarily for console usage.</p>
<p>The only change made to the content of “info” is
some added indentation.</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="usage_adv.html" class="btn btn-neutral float-right" title="Other details for advanced users" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="api.html" class="btn btn-neutral float-left" title="Public API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright André Roberge.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>